<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Clothing Pricer</title>
</head>
<body>
  <h1>Upload a Shirt Image</h1>
  <input type="file" accept="image/*" onchange="handleFile(event)">
  <button onclick="upload()">Analyze</button>
  <pre id="result"></pre>

<script>
async function handleFile(event) {
  const file = event.target.files[0];
  const reader = new FileReader();

  reader.onload = async () => {
    const imageUrl = reader.result;

    const res = await fetch("/api/analyze", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ imageUrl }),
    });

    const data = await res.json();
    document.getElementById("result").innerText = data.description;
  };

  reader.readAsDataURL(file);
}
</script>
</body>
</html>
